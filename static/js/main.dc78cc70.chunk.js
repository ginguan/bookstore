(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{43:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(5),i=n(0),c=n(10),o=n.n(c),r=(n(71),n(44)),s=n(45),l=n(51),d=n(50),u=n(52),j=(n(72),n(12)),b=n(46),p={items:[{id:0,name:"The Last Days of John Lennon",finished:!1,description:"The greatest true-crime story in music history, as only James Patterson can tell it.",price:15.99,category:"History"}],finishedCount:0,visible:!0,totalCount:1},f=Object(b.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Get":var n=JSON.parse(JSON.stringify(e));return n.items=t.items,n;case"Modify":var a=JSON.parse(JSON.stringify(e)),i=0;return a.items.forEach((function(e,n){t.itemId===e.id&&(e.finished=t.flag),e.finished&&(i+=1)})),a.finishedCount=i,a;case"Delete":var c=JSON.parse(JSON.stringify(e)),o=0;return c.items.forEach((function(e,n){t.itemId===e.id&&(console.log(e.id),c.items.splice(n,1))})),c.items.forEach((function(e,t){e.finished&&(o+=1)})),c.finishedCount=o,c;case"Add":var r=JSON.parse(JSON.stringify(e));return r.items.push(t.item),r.totalCount++,r;case"Edit":var s=JSON.parse(JSON.stringify(e));return s.items.forEach((function(e,n){t.item.id===e.id&&(s.items[n]=t.item)})),s;default:return e}})),m=n(115),h=n(111),O=n(110),g=n(116),y=n(113),x=n(112);n(43);var v=function(e){var t=e.item,n=Object(i.useState)(t.id),c=Object(j.a)(n,2),o=c[0],r=(c[1],Object(i.useState)(!1)),s=Object(j.a)(r,2),l=s[0],d=s[1],u=Object(i.useState)(t.name),b=Object(j.a)(u,2),p=b[0],v=b[1],C=Object(i.useState)(t.price),N=Object(j.a)(C,2),S=N[0],k=N[1],I=Object(i.useState)(t.category),P=Object(j.a)(I,2),J=P[0],B=P[1],E=Object(i.useState)(t.description),W=Object(j.a)(E,2),D=W[0],L=W[1],w=function(){d(!0)},T={id:o,name:p,price:S,category:J,description:D,finished:!1};return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{onClick:w,children:t.name}),Object(a.jsx)("td",{onClick:w,children:t.price}),Object(a.jsx)("td",{onClick:w,children:t.category}),Object(a.jsx)("td",{onClick:w,children:t.description}),Object(a.jsxs)("td",{children:[Object(a.jsx)("button",{className:"btn btn-danger text-black delBtn",onClick:function(){return function(e){var t=function(e){return{type:"Delete",itemId:e}}(e);f.dispatch(t)}(t.id)},children:"Remove"}),Object(a.jsxs)(m.a,{open:l,onClose:function(){d(!1)},className:"dialog","aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(g.a,{id:"form-dialog-title",className:"dialogTitle",children:"Book Info"}),Object(a.jsxs)(O.a,{className:"dialog-content",children:["Book Name",Object(a.jsx)(x.a,{InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"name",type:"text",defaultValue:t.name,fullWidth:!0,onChange:function(e){v(e.target.value)}}),"Price",Object(a.jsx)(x.a,{InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"price",type:"text",defaultValue:t.price,fullWidth:!0,onChange:function(e){k(e.target.value)}}),"Category",Object(a.jsx)(x.a,{InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"category",type:"text",defaultValue:t.category,fullWidth:!0,onChange:function(e){B(e.target.value)}}),"Description",Object(a.jsx)(x.a,{InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"description",type:"text",defaultValue:t.description,fullWidth:!0,onChange:function(e){L(e.target.value)},multiline:!0})]}),Object(a.jsxs)(h.a,{className:"dialog-action",children:[Object(a.jsx)(y.a,{onClick:function(){v(""),k(""),B(""),L(""),d(!1)},variant:"contained",color:"secondary",children:"Cancel"}),Object(a.jsx)(y.a,{onClick:function(){if(""!=T.name.trim()&&""!=T.price&&""!=T.description&&""!=T.category)if(/^[1-9]\d*(((,\d{3}){1})?(\.\d{0,2})?)$/.test(T.price)){var e=function(e){return{type:"Edit",item:e}}(T);f.dispatch(e),d(!1)}else alert("Invalid price format, please input a number!");else alert("Form can not be blank")},variant:"contained",color:"primary",children:"Save"})]})]})]})]})},C=n(30);var N=function(){var e,t=Object(i.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],r=f.getState(),s=r.totalCount,l=(r.visible,Object(i.useState)(0)),d=Object(j.a)(l,2),u=d[0],b=d[1],p=Object(i.useState)(""),v=Object(j.a)(p,2),N=v[0],S=v[1],k=Object(i.useState)(""),I=Object(j.a)(k,2),P=I[0],J=I[1],B=Object(i.useState)(""),E=Object(j.a)(B,2),W=E[0],D=E[1],L=Object(i.useState)(""),w=Object(j.a)(L,2),T=w[0],V=w[1],A={id:u,name:N,price:P,category:W,description:T,finished:!1};return Object(i.useEffect)((function(){0!==u&&function(){var e=function(e){return{type:"Add",item:e}}(A);f.dispatch(e),o(!1)}(),b(0)}),[u]),Object(a.jsxs)("div",{style:{margin:"0 auto",width:"7rem",marginBottom:"1rem"},children:[Object(a.jsx)(y.a,(e={style:{left:"300%"},variant:"outlined"},Object(C.a)(e,"variant","contained"),Object(C.a)(e,"color","primary"),Object(C.a)(e,"onClick",(function(){o(!0)})),Object(C.a)(e,"children","Add Book"),e)),Object(a.jsxs)(m.a,{open:c,onClose:function(){o(!1)},"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(g.a,{className:"dialogTitle",id:"form-dialog-title",children:"New Book"}),Object(a.jsxs)(O.a,{className:"dialog-content",children:[Object(a.jsx)(x.a,{InputLabelProps:{style:{color:"#cee5e7"}},InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",autoFocus:!0,margin:"dense",id:"name",label:"Book Name",type:"text",fullWidth:!0,onChange:function(e){S(e.target.value)}}),Object(a.jsx)(x.a,{InputLabelProps:{style:{color:"#cee5e7"}},InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"price",label:"Price",type:"text",fullWidth:!0,onChange:function(e){J(e.target.value)}}),Object(a.jsx)(x.a,{InputLabelProps:{style:{color:"#cee5e7"}},InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"category",label:"Category",type:"text",fullWidth:!0,onChange:function(e){D(e.target.value)}}),Object(a.jsx)(x.a,{InputLabelProps:{style:{color:"#cee5e7"}},InputProps:{style:{color:"#e9f4f5"}},className:"dialog-input",margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,onChange:function(e){V(e.target.value)}})]}),Object(a.jsxs)(h.a,{className:"dialog-action",children:[Object(a.jsx)(y.a,{onClick:function(){S(""),J(""),D(""),V(""),o(!1)},variant:"contained",color:"secondary",children:"Cancel"}),Object(a.jsx)(y.a,{onClick:function(){0!==A.name.trim().length&&""!=A.price&&""!=A.description.trim()&&""!=A.category.trim()?/^[1-9]\d*(((,\d{3}){1})?(\.\d{0,2})?)$/.test(A.price)?b(s):alert("Invalid price format, please input a number!"):alert("Form can not be blank")},variant:"contained",color:"primary",children:"Create"})]})]})]})},S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onChangeStore=function(){a.setState(f.getState())},a.state=f.getState(),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){f.subscribe(this.onChangeStore)}},{key:"render",value:function(){var e=this.state.items;return Object(a.jsxs)("div",{className:"background",children:[Object(a.jsx)("h1",{children:"BookStore"}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"dataTable",children:Object(a.jsxs)(u.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(a.jsx)("thead",{className:"thead-dark",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Name"}),Object(a.jsx)("th",{scope:"col",children:"Price"}),Object(a.jsx)("th",{scope:"col",children:"Category"}),Object(a.jsx)("th",{scope:"col",children:"Description"}),Object(a.jsx)("th",{scope:"col"})]})},-1),Object(a.jsx)("tbody",{children:e.map((function(e,t){return Object(a.jsx)(v,{item:e},t)}))})]})}),Object(a.jsx)(N,{})]})]})}}]),n}(i.Component);o.a.render(Object(a.jsx)(S,{}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.dc78cc70.chunk.js.map